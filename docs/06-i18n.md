# Internationalization (i18n)

## Overview

The installer supports multiple languages using `react-i18next`. Currently supported:
- English (en) - default
- Russian (ru)

Languages can be added later by creating new translation files.

## Setup

```typescript
// src/i18n/index.ts

import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import en from './en.json';
import ru from './ru.json';

i18n
  .use(initReactI18next)
  .init({
    resources: {
      en: { translation: en },
      ru: { translation: ru },
    },
    lng: 'en',  // Default language
    fallbackLng: 'en',
    interpolation: {
      escapeValue: false,  // React already escapes
    },
  });

export default i18n;
```

## English Translations

```json
// src/i18n/en.json
{
  "app": {
    "title": "Voboost Installer",
    "version": "Version {{version}}"
  },

  "common": {
    "next": "Next",
    "back": "Back",
    "cancel": "Cancel",
    "finish": "Finish",
    "retry": "Retry",
    "close": "Close",
    "copyLog": "Copy Log",
    "showLog": "Show Log",
    "hideLog": "Hide Log",
    "copied": "Copied!",
    "loading": "Loading...",
    "error": "Error",
    "success": "Success"
  },

  "steps": {
    "license": "License",
    "download": "Download",
    "connect": "Connect",
    "install": "Install",
    "done": "Done"
  },

  "eula": {
    "title": "License Agreement",
    "subtitle": "Please read and accept the license agreement",
    "accept": "I accept the license agreement",
    "mustAccept": "You must accept the license agreement to continue",
    "scrollToRead": "Scroll to read the full agreement"
  },

  "download": {
    "title": "Select Version",
    "subtitle": "Choose which version to install",
    "stable": "Stable",
    "beta": "Beta",
    "releaseDate": "Released {{date}}",
    "fileSize": "{{size}}",
    "changelog": "What's new",
    "download": "Download",
    "downloading": "Downloading...",
    "downloadProgress": "{{downloaded}} / {{total}}",
    "verifying": "Verifying...",
    "ready": "Ready to install",
    "alreadyDownloaded": "Already downloaded",
    "selectVersion": "Select a version to download",
    "noReleases": "No releases available",
    "fetchError": "Failed to fetch releases",
    "downloadError": "Download failed",
    "hashMismatch": "File verification failed. Please try again."
  },

  "connection": {
    "title": "Connect Your Vehicle",
    "subtitle": "Follow these steps to connect your car's head unit",
    "step1Title": "Use a USB-A to USB-C cable",
    "step1Desc": "Make sure you have a data cable, not a charging-only cable",
    "step2Title": "Connect to the USB port in your car",
    "step2Desc": "Use the USB port in the center console or glove box",
    "step3Title": "Enable USB Debugging",
    "step3Desc": "On your head unit:",
    "step3sub1": "Go to Settings > About > Build Number",
    "step3sub2": "Tap Build Number 7 times to enable Developer Options",
    "step3sub3": "Go to Settings > Developer Options",
    "step3sub4": "Enable USB Debugging",
    "step3sub5": "Accept the USB debugging prompt when it appears",
    "statusTitle": "Connection Status",
    "searching": "Searching for device...",
    "connected": "Connected",
    "deviceInfo": "{{model}} ({{serial}})",
    "notConnected": "Not connected",
    "unauthorized": "Please accept USB debugging prompt on your device",
    "checkConnection": "Check Connection",
    "troubleshooting": "Troubleshooting",
    "troubleshootingTip1": "Try a different USB cable",
    "troubleshootingTip2": "Try a different USB port",
    "troubleshootingTip3": "Restart your head unit",
    "troubleshootingTip4": "Make sure USB debugging is enabled"
  },

  "install": {
    "title": "Installing Voboost",
    "subtitle": "Please wait while Voboost is being installed",
    "step": "Step {{current}} of {{total}}",
    "inProgress": "In progress...",
    "success": "Completed successfully",
    "failed": "Failed",
    "pending": "Pending",
    "steps": {
      "wait-device-1": "Waiting for device",
      "root-1": "Enabling root access",
      "remount-1": "Remounting filesystem",
      "disable-verity-1": "Disabling verity",
      "install-apk": "Installing Voboost APK",
      "reboot": "Rebooting device",
      "wait-device-2": "Waiting for device",
      "root-2": "Enabling root access",
      "remount-2": "Remounting filesystem",
      "disable-verity-2": "Disabling verity"
    },
    "logTitle": "Installation Log",
    "errorTitle": "Installation Failed",
    "errorMessage": "An error occurred during installation. Please copy the log and contact support.",
    "retryInstall": "Retry Installation"
  },

  "complete": {
    "title": "Installation Complete!",
    "subtitle": "Voboost has been successfully installed on your vehicle",
    "nextStepsTitle": "Next Steps",
    "step1": "Disconnect the USB cable from your car",
    "step2": "Your head unit will restart automatically",
    "step3": "Find Voboost in your app list",
    "enjoyMessage": "Enjoy using Voboost!",
    "documentation": "Open Documentation",
    "support": "Get Support"
  },

  "errors": {
    "networkError": "Network error. Please check your internet connection.",
    "deviceNotFound": "Device not found. Please check the USB connection.",
    "deviceUnauthorized": "Please accept USB debugging prompt on your device.",
    "deviceOffline": "Device is offline. Please reconnect the USB cable.",
    "installFailed": "Installation failed: {{error}}",
    "downloadFailed": "Download failed: {{error}}",
    "hashMismatch": "File verification failed. The downloaded file may be corrupted.",
    "adbError": "ADB error: {{error}}",
    "unknownError": "An unknown error occurred. Please try again."
  },

  "language": {
    "select": "Language",
    "en": "English",
    "ru": "Русский"
  }
}
```

## Russian Translations

```json
// src/i18n/ru.json
{
  "app": {
    "title": "Установщик Voboost",
    "version": "Версия {{version}}"
  },

  "common": {
    "next": "Далее",
    "back": "Назад",
    "cancel": "Отмена",
    "finish": "Завершить",
    "retry": "Повторить",
    "close": "Закрыть",
    "copyLog": "Копировать лог",
    "showLog": "Показать лог",
    "hideLog": "Скрыть лог",
    "copied": "Скопировано!",
    "loading": "Загрузка...",
    "error": "Ошибка",
    "success": "Успешно"
  },

  "steps": {
    "license": "Лицензия",
    "download": "Загрузка",
    "connect": "Подключение",
    "install": "Установка",
    "done": "Готово"
  },

  "eula": {
    "title": "Лицензионное соглашение",
    "subtitle": "Пожалуйста, прочитайте и примите лицензионное соглашение",
    "accept": "Я принимаю условия лицензионного соглашения",
    "mustAccept": "Для продолжения необходимо принять лицензионное соглашение",
    "scrollToRead": "Прокрутите, чтобы прочитать полное соглашение"
  },

  "download": {
    "title": "Выбор версии",
    "subtitle": "Выберите версию для установки",
    "stable": "Стабильная",
    "beta": "Бета",
    "releaseDate": "Выпущено {{date}}",
    "fileSize": "{{size}}",
    "changelog": "Что нового",
    "download": "Скачать",
    "downloading": "Загрузка...",
    "downloadProgress": "{{downloaded}} / {{total}}",
    "verifying": "Проверка...",
    "ready": "Готово к установке",
    "alreadyDownloaded": "Уже загружено",
    "selectVersion": "Выберите версию для загрузки",
    "noReleases": "Нет доступных версий",
    "fetchError": "Не удалось получить список версий",
    "downloadError": "Ошибка загрузки",
    "hashMismatch": "Ошибка проверки файла. Попробуйте снова."
  },

  "connection": {
    "title": "Подключение к автомобилю",
    "subtitle": "Следуйте инструкциям для подключения головного устройства",
    "step1Title": "Используйте кабель USB-A к USB-C",
    "step1Desc": "Убедитесь, что это кабель для передачи данных, а не только для зарядки",
    "step2Title": "Подключите к USB-порту в автомобиле",
    "step2Desc": "Используйте USB-порт в центральной консоли или бардачке",
    "step3Title": "Включите отладку по USB",
    "step3Desc": "На головном устройстве:",
    "step3sub1": "Перейдите в Настройки > О телефоне > Номер сборки",
    "step3sub2": "Нажмите на Номер сборки 7 раз для включения режима разработчика",
    "step3sub3": "Перейдите в Настройки > Для разработчиков",
    "step3sub4": "Включите отладку по USB",
    "step3sub5": "Подтвердите запрос на отладку по USB, когда он появится",
    "statusTitle": "Статус подключения",
    "searching": "Поиск устройства...",
    "connected": "Подключено",
    "deviceInfo": "{{model}} ({{serial}})",
    "notConnected": "Не подключено",
    "unauthorized": "Подтвердите запрос на отладку по USB на устройстве",
    "checkConnection": "Проверить подключение",
    "troubleshooting": "Устранение неполадок",
    "troubleshootingTip1": "Попробуйте другой USB-кабель",
    "troubleshootingTip2": "Попробуйте другой USB-порт",
    "troubleshootingTip3": "Перезагрузите головное устройство",
    "troubleshootingTip4": "Убедитесь, что отладка по USB включена"
  },

  "install": {
    "title": "Установка Voboost",
    "subtitle": "Пожалуйста, подождите, пока Voboost устанавливается",
    "step": "Шаг {{current}} из {{total}}",
    "inProgress": "Выполняется...",
    "success": "Успешно завершено",
    "failed": "Ошибка",
    "pending": "Ожидание",
    "steps": {
      "wait-device-1": "Ожидание устройства",
      "root-1": "Включение root-доступа",
      "remount-1": "Перемонтирование файловой системы",
      "disable-verity-1": "Отключение verity",
      "install-apk": "Установка Voboost APK",
      "reboot": "Перезагрузка устройства",
      "wait-device-2": "Ожидание устройства",
      "root-2": "Включение root-доступа",
      "remount-2": "Перемонтирование файловой системы",
      "disable-verity-2": "Отключение verity"
    },
    "logTitle": "Лог установки",
    "errorTitle": "Ошибка установки",
    "errorMessage": "Произошла ошибка во время установки. Скопируйте лог и обратитесь в поддержку.",
    "retryInstall": "Повторить установку"
  },

  "complete": {
    "title": "Установка завершена!",
    "subtitle": "Voboost успешно установлен на ваш автомобиль",
    "nextStepsTitle": "Дальнейшие действия",
    "step1": "Отключите USB-кабель от автомобиля",
    "step2": "Головное устройство перезагрузится автоматически",
    "step3": "Найдите Voboost в списке приложений",
    "enjoyMessage": "Приятного использования Voboost!",
    "documentation": "Открыть документацию",
    "support": "Получить поддержку"
  },

  "errors": {
    "networkError": "Ошибка сети. Проверьте подключение к интернету.",
    "deviceNotFound": "Устройство не найдено. Проверьте USB-подключение.",
    "deviceUnauthorized": "Подтвердите запрос на отладку по USB на устройстве.",
    "deviceOffline": "Устройство не в сети. Переподключите USB-кабель.",
    "installFailed": "Ошибка установки: {{error}}",
    "downloadFailed": "Ошибка загрузки: {{error}}",
    "hashMismatch": "Ошибка проверки файла. Загруженный файл может быть повреждён.",
    "adbError": "Ошибка ADB: {{error}}",
    "unknownError": "Произошла неизвестная ошибка. Попробуйте снова."
  },

  "language": {
    "select": "Язык",
    "en": "English",
    "ru": "Русский"
  }
}
```

## Usage in Components

```typescript
// Example: EulaScreen.tsx

import { useTranslation } from 'react-i18next';
import { Button, Checkbox, Title2, Text } from '@fluentui/react-components';

export function EulaScreen() {
  const { t } = useTranslation();
  const [accepted, setAccepted] = useState(false);

  return (
    <div className="eula-screen">
      <Title2>{t('eula.title')}</Title2>
      <Text>{t('eula.subtitle')}</Text>

      {/* EULA content */}

      <Checkbox
        checked={accepted}
        onChange={(_, data) => setAccepted(data.checked === true)}
        label={t('eula.accept')}
      />

      <Button
        appearance="primary"
        disabled={!accepted}
      >
        {t('common.next')}
      </Button>
    </div>
  );
}
```

## Language Selector Component

```typescript
// src/components/LanguageSelector/LanguageSelector.tsx

import { useTranslation } from 'react-i18next';
import { Select, SelectOnChangeData } from '@fluentui/react-components';
import './LanguageSelector.css';

const languages = [
  { code: 'en', name: 'English' },
  { code: 'ru', name: 'Русский' },
];

export function LanguageSelector() {
  const { i18n, t } = useTranslation();

  const handleChange = (_: unknown, data: SelectOnChangeData) => {
    i18n.changeLanguage(data.value);
  };

  return (
    <div className="language-selector">
      <Select
        value={i18n.language}
        onChange={handleChange}
        aria-label={t('language.select')}
      >
        {languages.map((lang) => (
          <option key={lang.code} value={lang.code}>
            {lang.name}
          </option>
        ))}
      </Select>
    </div>
  );
}
```

## Adding New Languages

To add a new language (e.g., Chinese):

1. Create `src/i18n/zh.json` with translations
2. Import in `src/i18n/index.ts`:

```typescript
import zh from './zh.json';

i18n.init({
  resources: {
    en: { translation: en },
    ru: { translation: ru },
    zh: { translation: zh },  // Add new language
  },
  // ...
});
```

3. Add to language selector:

```typescript
const languages = [
  { code: 'en', name: 'English' },
  { code: 'ru', name: 'Русский' },
  { code: 'zh', name: '中文' },  // Add new language
];
```

## Date and Number Formatting

Use the browser's Intl API for locale-aware formatting:

```typescript
// Format date based on current language
function formatDate(date: string, language: string): string {
  const locale = language === 'ru' ? 'ru-RU' : 'en-US';
  return new Date(date).toLocaleDateString(locale, {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  });
}

// Format file size
function formatFileSize(bytes: number): string {
  if (bytes < 1024) return `${bytes} B`;
  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;
  return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;
}
```
